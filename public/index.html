<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MGV Messenger</title>
<link rel="stylesheet" href="/style.css">
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="login-screen" style="display:flex;">
  <div class="login-box">
    <div class="login-logo">MGV<span>.</span></div>
    <div class="login-tag">Secure Messenger</div>
    <div class="login-err" id="login-err"></div>
    <label class="lbl">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
    <input class="inp" id="l-name" type="text" placeholder="username" maxlength="30" autocomplete="username">
    <label class="lbl">–ü–∞—Ä–æ–ª—å</label>
    <input class="inp" id="l-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
    <button class="btn" id="login-btn">‚Üí –í–û–ô–¢–ò / –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê APP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app">

  <!-- Top Bar -->
  <div class="topbar">
    <div class="topbar-logo">MGV<span>.</span></div>
    <div class="topbar-right">
      <div class="user-chip">
        <div class="online-dot" id="conn-dot"></div>
        <span id="topbar-user">‚Äî</span>
      </div>
      <a id="admin-link" class="icon-btn" href="/admin.html" target="_blank" title="–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å" style="display:none;text-decoration:none;">‚öôÔ∏è</a>
      <button class="icon-btn" onclick="MGV.doLogout()" title="–í—ã–π—Ç–∏">üö™</button>
    </div>
  </div>

  <!-- Workspace -->
  <div class="workspace">

    <!-- ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ -->
    <div class="sidebar">
      <div style="overflow-y:auto;flex:1;display:flex;flex-direction:column;">

        <!-- Channels -->
        <div class="sidebar-section">
          –ö–∞–Ω–∞–ª—ã
          <button class="sidebar-add-btn" onclick="MGV.openCreateChannel()" title="–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª">+</button>
        </div>
        <div id="channel-list" class="sidebar-list"></div>

        <div class="sidebar-divider"></div>

        <!-- Online users -->
        <div class="sidebar-section">–û–Ω–ª–∞–π–Ω</div>
        <div id="online-list"></div>

      </div>
    </div>

    <!-- ‚îÄ‚îÄ Chat Area ‚îÄ‚îÄ -->
    <div class="chat-area">

      <!-- No chat selected -->
      <div class="no-chat" id="no-chat">
        <div class="no-chat-logo">MGV<span>.</span></div>
        <div class="no-chat-text">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–∞–ª –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</div>
      </div>

      <!-- Chat view -->
      <div id="chat-view" style="display:none;flex-direction:column;flex:1;overflow:hidden;">

        <!-- Chat header -->
        <div class="chat-header">
          <span class="chat-header-icon">#</span>
          <div>
            <span class="chat-header-name" id="chat-name">‚Äî</span>
            <span class="chat-header-desc" id="chat-desc"></span>
          </div>
          <div class="chat-header-right">
            <button class="icon-btn" id="call-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫">üìû</button>
          </div>
        </div>

        <!-- Messages -->
        <div id="messages"></div>
        <div class="typing-indicator" id="typing-indicator"></div>

        <!-- Input area -->
        <div class="input-area">
          <!-- Upload preview -->
          <div id="upload-preview" style="display:none;" class="upload-preview">
            <span>üìé</span>
            <span class="up-name" id="upload-preview-name">‚Äî</span>
            <button class="upload-cancel" id="upload-cancel-btn">‚úï</button>
          </div>

          <div class="input-row">
            <div class="input-actions">
              <button class="input-icon-btn" onclick="MGV.attachFile()" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">üìé</button>
            </div>
            <textarea id="msg-input" rows="1" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ..."></textarea>
            <div class="input-actions">
              <button class="send-btn" id="send-btn" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">‚û§</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê MODALS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- Create Channel -->
<div class="modal-overlay" id="create-channel-modal">
  <div class="modal">
    <div class="modal-title">–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</div>
    <div class="form-group">
      <label class="lbl">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
      <input class="inp" id="new-ch-name" type="text" placeholder="–º–æ–π-–∫–∞–Ω–∞–ª" maxlength="30">
    </div>
    <div class="form-group">
      <label class="lbl">–û–ø–∏—Å–∞–Ω–∏–µ</label>
      <input class="inp" id="new-ch-desc" type="text" placeholder="–û —á—ë–º —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª" maxlength="100">
    </div>
    <div class="modal-actions">
      <button class="btn btn-ghost btn-sm" onclick="MGV.closeCreateChannel()">–û—Ç–º–µ–Ω–∞</button>
      <button class="btn btn-sm" onclick="MGV.submitCreateChannel()">–°–æ–∑–¥–∞—Ç—å</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CALL OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="call-overlay">
  <div class="call-avatar" id="call-avatar">?</div>
  <div class="call-name" id="call-peer-name">‚Äî</div>
  <div class="call-status" id="call-status">–ó–í–û–ù–ò–ú...</div>
  <div class="call-timer" id="call-timer"></div>
  <div class="call-controls">
    <button class="call-btn call-btn-mute" id="mute-btn" onclick="MGV.toggleMute()">üé§</button>
    <button class="call-btn call-btn-end" onclick="MGV.endCall()">üìµ</button>
  </div>
</div>

<!-- Incoming Call -->
<div id="incoming-call">
  <div class="inc-label">üìû –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫</div>
  <div class="inc-name" id="inc-name">‚Äî</div>
  <div class="inc-btns">
    <button class="btn btn-danger btn-sm" onclick="MGV.declineCall()">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
    <button class="btn btn-green btn-sm" onclick="MGV.answerCall()">–ü—Ä–∏–Ω—è—Ç—å</button>
  </div>
</div>

<!-- Image Lightbox -->
<div id="lightbox">
  <img src="" alt="">
</div>

<!-- Hidden file input -->
<input type="file" id="file-input" style="display:none" accept="*/*">

<audio id="remote-audio" autoplay></audio>

<script src="/app.js"></script>
</body>
</html>
